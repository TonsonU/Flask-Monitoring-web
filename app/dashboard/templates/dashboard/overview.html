<!-- ส่วนที่ 1: ภาพรวม (Overview) -->
<div id="overview" class="container-fluid">
    <div class="row mb-4">
        <div class="col-md-12">
            <h2>ภาพรวมงาน CM</h2>
        </div>
        <!-- Summary Cards -->
        <div class="col-md-3">
            <div class="card bg-primary text-white">
                <div class="card-body">
                    <h5 class="card-title">จำนวนงาน CM ทั้งหมด</h5>
                    <p class="card-text" id="total-cm-tasks">{{ total_cm }}</p>
                </div>
            </div>
        </div>
        <div class="col-md-3">
            <div class="card bg-warning text-dark">
                <div class="card-body">
                    <h5 class="card-title">งานที่กำลังดำเนินการ</h5>
                    <p class="card-text" id="cm-tasks-in-progress">{{ open_cm }}</p>
                </div>
            </div>
        </div>
        <div class="col-md-3">
            <div class="card bg-success text-white">
                <div class="card-body">
                    <h5 class="card-title">งานที่ซ่อมเสร็จแล้ว</h5>
                    <p class="card-text" id="cm-tasks-completed">{{ close_cm }}</p>
                </div>
            </div>
        </div>
         

        <!-- Pie Chart: อุปกรณ์ที่เสียบ่อยที่สุด -->
        <div class="col-md-6 mt-4">
            <div class="card">
                <div class="card-body">
                    <h5 class="card-title">เปอร์เซ็นต์ประเภทอุปกรณ์ที่เสียบ่อยที่สุด</h5>
                    <canvas id="equipment-failure-pie-chart"></canvas>
                </div>
            </div>
        </div>

        <!-- Bar Chart: งานซ่อมที่ค้างอยู่ในแต่ละสถานที่ -->
        <div class="col-md-6 mt-4">
            <div class="card">
                <div class="card-body">
                    <h5 class="card-title">งานซ่อมที่ค้างอยู่ในแต่ละสถานที่</h5>
                    <canvas id="pending-tasks-by-location-bar-chart"></canvas>
                </div>
            </div>
        </div>


        <!-- Map Visualization: Heatmap/Bubble Chart แสดงจำนวนงาน CM ในแต่ละสถานที่ -->
        <div class="col-md-12 mt-4">
            <div class="card">
                <div class="card-body">
                    <h5 class="card-title">จำนวนงาน CM ในแต่ละสถานที่</h5>
                    <div id="cm-location-map" style="height: 400px;">
                        <!-- Map will be rendered here -->
                    </div>
                </div>
            </div>
        </div>
    </div>
    <script>
            // Example data for charts and tables (replace with your actual data)
            const equipmentFailureData = {
                labels: ['อุปกรณ์ A', 'อุปกรณ์ B', 'อุปกรณ์ C', 'อุปกรณ์ D','อุปกรณ์ E','อุปกรณ์ F','อุปกรณ์ G','อุปกรณ์ H','อุปกรณ์ I','อุปกรณ์ J','อุปกรณ์ K','อุปกรณ์ L','อุปกรณ์ M','อุปกรณ์ N','อุปกรณ์ O','อุปกรณ์ P','อุปกรณ์ Q'],
                data: [30, 25, 20, 15, 10, 5,4,3,2,1,1,1,1,1,1,1,1]
            };
            const pendingTaskData = {
                labels: ['สถานที่ A', 'สถานที่ B', 'สถานที่ C','สถานที่ D','สถานที่ E','สถานที่ F','สถานที่ G','สถานที่ H','สถานที่ I','สถานที่ J','สถานที่ K','สถานที่ L','สถานที่ M','สถานที่ N','สถานที่ O','สถานที่ P','สถานที่ Q','สถานที่ R','สถานที่ S','สถานที่ T','สถานที่ U','สถานที่ V','สถานที่ W','สถานที่ X','สถานที่ Y','สถานที่ Z','สถานที่ AA','สถานที่ BB','สถานที่ CC','สถานที่ DD','สถานที่ EE','สถานที่ FF','สถานที่ GG','สถานที่ HH','สถานที่ II','สถานที่ JJ','สถานที่ KK','สถานที่ LL','สถานที่ MM','สถานที่ NN','สถานที่ OO','สถานที่ PP','สถานที่ QQ','สถานที่ RR'],
                data: [30, 25, 20, 15, 10, 5,4,3,2,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]
            };
             // Render the charts
            const equipmentFailurePieChart = new Chart(document.getElementById('equipment-failure-pie-chart'), {
                type: 'pie',
                data: {
                    labels: equipmentFailureData.labels,
                    datasets: [{
                        label: 'จำนวนงาน',
                        data: equipmentFailureData.data,
                        backgroundColor: ['rgba(54, 162, 235, 0.8)', 'rgba(255, 99, 132, 0.8)','rgba(54, 162, 235, 0.8)', 'rgba(255, 99, 132, 0.8)','rgba(54, 162, 235, 0.8)', 'rgba(255, 99, 132, 0.8)','rgba(54, 162, 235, 0.8)', 'rgba(255, 99, 132, 0.8)','rgba(54, 162, 235, 0.8)', 'rgba(255, 99, 132, 0.8)','rgba(54, 162, 235, 0.8)', 'rgba(255, 99, 132, 0.8)','rgba(54, 162, 235, 0.8)', 'rgba(255, 99, 132, 0.8)','rgba(54, 162, 235, 0.8)', 'rgba(255, 99, 132, 0.8)','rgba(54, 162, 235, 0.8)', 'rgba(255, 99, 132, 0.8)']
                    }]
                }
            });

            const pendingTasksBarChart = new Chart(document.getElementById('pending-tasks-by-location-bar-chart'), {
            type: 'bar',
            data: {
                labels: pendingTaskData.labels,
                datasets: [{
                    label: 'จำนวนงานค้าง',
                    data: pendingTaskData.data,
                    backgroundColor: 'rgba(75, 192, 192, 0.8)'
                }]
            },
            options:{
                indexAxis:'y'
            }
        });
        </script>
</div>
