{% extends "dashboard/dashboard.html" %}

{% block dashboard_content %}

<!-- ส่วนที่ 1: ภาพรวม (Overview) -->
<div id="overview" class="container-fluid">
    <div class="row mb-4">
        <div class="col-md-12">
            <h2 class="mb-3 fw-bold">Overview CM</h2>
        </div>

        <!-- Summary Cards -->
        <div class="row">
            <!-- Card 1 -->
            <div class="col-xl-3 col-sm-6 col-12">
                <div class="card card-stats">
                    <div class="card-body d-flex justify-content-between align-items-center">
                        <div class="icon-box">
                            <i class="fa-solid fa-list-check text-primary fa-2xl"></i>
                        </div>
                        <div class="text-end">
                            <h3 class="fw-bold">{{ total_cm }}</h3>
                            <span class="text-muted">จำนวนงาน CM</span>
                        </div>
                    </div>
                </div>
            </div>
            <!-- Card 2 -->
            <div class="col-xl-3 col-sm-6 col-12">
                <div class="card card-stats">
                    <div class="card-body d-flex justify-content-between align-items-center">
                        <div class="icon-box">
                            <i class="fa-solid fa-spinner text-warning fa-2xl"></i>
                        </div>
                        <div class="text-end">
                            <h3 class="fw-bold">{{ open_cm }}</h3>
                            <span class="text-muted">งานที่กำลังดำเนินการ</span>
                        </div>
                    </div>
                </div>
            </div>
            <!-- Card 3 -->
            <div class="col-xl-3 col-sm-6 col-12">
                <div class="card card-stats">
                    <div class="card-body d-flex justify-content-between align-items-center">
                        <div class="icon-box">
                            <i class="fa-solid fa-check-circle text-success fa-2xl"></i>
                        </div>
                        <div class="text-end">
                            <h3 class="fw-bold">{{ close_cm }}</h3>
                            <span class="text-muted">งานที่ซ่อมเสร็จแล้ว</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>

           
        

        <!-- Pie Chart: จำนวนงาน CM ทั้งหมด -->
        <div class="col-lg-6 col-md-12 mt-4">
            <div class="card shadow-sm rounded-4 text-center">
                <div class="card-body">
                    <h5 class="card-title fw-bold">จำนวนงาน CM ทั้งหมด </h5>
                    <div class="chart-container" style="max-width: 400px; margin: 0 auto;">
                        <canvas id="cm-status-pie-chart"></canvas>
                    </div>
                </div>
            </div>
        </div>
        

        <!-- Pie Chart: อุปกรณ์ที่เสียบ่อยที่สุด -->
        <div class="col-lg-6 col-md-12 mt-4">
            <div class="card shadow-sm rounded-4 text-center">
                <div class="card-body">
                    <h5 class="card-title fw-bold">อุปกรณ์ที่เสียบ่อยที่สุด</h5>
                    <canvas id="equipment-failure-pie-chart" style="max-height: 300px;"></canvas>
                </div>
            </div>
        </div>

        <!-- Bar Chart: งานซ่อมที่ค้างอยู่ในแต่ละสถานที่ -->
        <div class="col-lg-6 col-md-12 mt-4">
            <div class="card shadow-sm rounded-4 text-center">
                <div class="card-body">
                    <h5 class="card-title fw-bold">CM ที่ค้างอยู่ในแต่ละสถานที่</h5>
                    <canvas id="pending-tasks-by-location-bar-chart"  style="max-height: 300px;"></canvas>
                </div>
            </div>
        </div>

        <!-- Bar Chart: งาน CM แยกตาม Line -->
        <div class="col-lg-6 col-md-12 mt-4">
            <div class="card shadow-sm rounded-4 text-center">
                <div class="card-body">
                    <h5 class="card-title fw-bold">งาน CM ทั้งหมดแยกตาม Line</h5>
                    <canvas id="cm-by-line-bar-chart"  style="max-height: 300px;"></canvas>
                </div>
            </div>
        </div>
    </div>
</div>


{% endblock %}